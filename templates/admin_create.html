{% extends "admin_base.html" %}

{% block title %}Admin - Create Link{% endblock %}

{% block content %}
<h1>Create New Link</h1>

{% if let Some(error) = error %}
<div class="message error">{{ error }}</div>
{% endif %}

{# nosemgrep: python.django.security.django-no-csrf-token.django-no-csrf-token #}
<form method="post" action="/admin/create">
    <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
    <div class="form-group">
        <label for="tag">Custom Tag (optional):</label>
        <input type="text" id="tag" name="tag" placeholder="my-custom-tag" value="{{ tag.clone().unwrap_or("".to_string() ) }}">
        <small>Leave blank to auto-generate, becomes the end of the URL.<br />Cannot use: {{ BANNED_TAGS | join(", ") }}</small>
    </div>
    <div class="form-group">
        <label for="name">Link Display Name:</label>
        <input type="text" id="name" name="name" required placeholder="My awesome link" value{{ display_name.clone().unwrap_or("".to_string()) }}>
    </div>

    <div class="form-group">
        <label for="target">Target URL:</label>
        <input type="text" id="target" name="target" required placeholder="https://example.com" value="{{ target.clone().unwrap_or("".to_string()) }}">
        <small>Must be a valid URL including http:// or https://</small>
    </div>

    <button type="submit">Create Link</button>
    <a href="/admin/" class="button btn-secondary">Cancel</a>
</form>
{% endblock %}
